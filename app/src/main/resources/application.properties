# Application
quarkus.application.name=greengage-exporter
quarkus.application.version=1.0.0
# HTTP Server
quarkus.http.port=${HTTP_PORT:8080}
quarkus.http.host=0.0.0.0
quarkus.http.ssl-port=${HTTPS_PORT:8443}
quarkus.log.level=${LOG_LEVEL:INFO}
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n
# Greengage DataSource
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=${DB_JDBC_URL:jdbc:postgresql://localhost:5432/postgres?sslmode=disable}
quarkus.datasource.username=${DB_USER:gpadmin}
quarkus.datasource.password=${DB_PASSWORD:}
quarkus.datasource.jdbc.max-size=${DB_POOL_MAX:5}
quarkus.datasource.jdbc.min-size=${DB_POOL_MIN:1}
quarkus.datasource.jdbc.initial-size=${DB_POOL_INIT:1}
quarkus.datasource.jdbc.acquisition-timeout=${DB_CONN_TIMEOUT:5S}
quarkus.datasource.jdbc.idle-removal-interval=${DB_IDLE_TIMEOUT:10M}
quarkus.datasource.jdbc.max-lifetime=${DB_MAX_LIFETIME:30M}
quarkus.datasource.jdbc.validation-query-sql=SELECT 1
quarkus.datasource.jdbc.background-validation-interval=${DB_VALIDATION_INTERVAL:2M}
# GPBackup History DataSource
quarkus.datasource.gpbackup_history.db-kind=sqlite
quarkus.datasource.gpbackup_history.jdbc.url=${GPBACKUP_HISTORY_JDBC_URL:jdbc:sqlite:/data1/master/gpseg-1/gpbackup_history.db}
quarkus.datasource.gpbackup_history.jdbc.min-size=1
quarkus.datasource.gpbackup_history.jdbc.max-size=1
quarkus.datasource.gpbackup_history.jdbc.additional-jdbc-properties.busy_timeout=30000
quarkus.datasource.gpbackup_history.jdbc.additional-jdbc-properties.open_mode=1
# Scrape Configuration
app.scrape.interval=${SCRAPE_INTERVAL:15s}
# Orchestrator Configuration
app.orchestrator.scrape-cache-max-age=${ORCHESTRATOR_CACHE_MAX_AGE:30s}
app.orchestrator.connection-retry-attempts=${ORCHESTRATOR_RETRY_ATTEMPTS:3}
app.orchestrator.connection-retry-delay=${ORCHESTRATOR_RETRY_DELAY:1s}
app.orchestrator.collector-failure-threshold=${ORCHESTRATOR_FAILURE_THRESHOLD:3}
app.orchestrator.circuit-breaker-enabled=${ORCHESTRATOR_CIRCUIT_BREAKER:true}
# Banner Configuration
app.banner.width=${BANNER_WIDTH:60}
# Metrics Exposition
quarkus.micrometer.enabled=true
quarkus.micrometer.registry-enabled-default=true
quarkus.micrometer.binder-enabled-default=false
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=${METRICS_PATH:/metrics}
quarkus.micrometer.binder.http-server.enabled=false
quarkus.micrometer.binder.http-client.enabled=false
# Enabled/Disabled Collectors
app.collectors.cluster-state-enabled=${COLLECTOR_CLUSTER_STATE_ENABLED:true}
app.collectors.segment-enabled=${COLLECTOR_SEGMENT_ENABLED:true}
app.collectors.connections-enabled=${COLLECTOR_CONNECTIONS_ENABLED:true}
app.collectors.locks-enabled=${COLLECTOR_LOCKS_ENABLED:true}
app.collectors.extended-locks-enabled=${COLLECTOR_EXTENDED_LOCKS_ENABLED:true}
app.collectors.database-size-enabled=${COLLECTOR_DATABASE_SIZE_ENABLED:true}
app.collectors.replication-monitor-enabled=${COLLECTOR_REPLICATION_MONITOR_ENABLED:true}
app.collectors.table-health-enabled=${COLLECTOR_TABLE_HEALTH_ENABLED:false}
app.collectors.gp-backup-history-enabled=${COLLECTOR_GP_BACKUP_HISTORY_ENABLED:false}
app.collectors.spill-per-host-enabled=${COLLECTOR_SPILL_PER_HOST_ENABLED:true}
app.collectors.disk-per-host-enabled=${COLLECTOR_DISK_PER_HOST_ENABLED:true}
app.collectors.rsg-per-host-enabled=${COLLECTOR_RSG_PER_HOST_ENABLED:true}
app.collectors.active-query-duration=${COLLECTOR_ACTIVE_QUERY_DURATION_ENABLED:true}
app.collectors.table-vacuum-statistics-enabled=${COLLECTOR_TABLE_VACUUM_STATS_ENABLED:true}
app.collectors.table-vacuum-statistics-tuple-threshold=${COLLECTOR_TABLE_VACUUM_TUPLE_THRESHOLD:1000}
app.collectors.db-vacuum-statistics-enabled=${COLLECTOR_DB_VACUUM_STATS_ENABLED:true}
app.collectors.vacuum-running-enabled=${COLLECTOR_VACUUM_RUNNING_ENABLED:true}
# Per-Database Collector Configuration
app.collectors.per-db.mode=${COLLECTOR_PER_DB_MODE:all}
app.collectors.per-db.connection-cache-enabled=${COLLECTOR_PER_DB_CACHE_ENABLED:true}
app.collectors.per-db.db-list=${COLLECTOR_PER_DB_LIST:"postgres"}
quarkus.liquibase.migrate-at-start=true